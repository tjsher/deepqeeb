# 1. 对话式生成剧本, 背后是一个agent A
我希望以网页ide的形式. 左侧是文件目录, 右边是对话框.
对话框会对左侧的文件目录进行增删改查.
文件目录只是展示形式, 真正的文件还在服务器上.
还需要提供查看对话历史记录的功能, 并且能随时续聊.
用户可以随时打开一个文件查看, 但是查看文件和对话框的占比如何分配呢?
能创建新的对话历史记录.

# 2. 剧本转游戏, 背后是一个agent B
依然保留网页ide的形式, 但生成的前端网页不允许在文件目录中看到.
网页生成完之后能够提供预览, 还要有分享功能, 点击后产出一个连接, 点击后打开这个做好的对话式网页文字游戏.
这个过程中可能生成多个对话式网页文字游戏, 也可能分享多次(也就是多个连接), 该怎么管理?


# 3. 游戏驱动agent C
对话式网页文字游戏生成后, 通过链接打开, 会关联到一个agent C.
网页中UI的样式在agent B就已经生成好, 但是展示的数据和一些交互功能, 由agent C来驱动. 相当于这个游戏不但需要监听agent C的输出, 还得处理数据为可展示/不可展示. 不可展示的数据驱动游戏状态/进度变换, 以及交互功能的触发, 可展示的数据直接展示给用户. 还需要实现存档功能, 同一个用户再次打开这个链接时, 能继续玩.

role=system
--------------------
...一些剧本的背景知识/定义, 格式要求, tools介绍

role=user
--------------------
剧本内容...
如何管控进度...
一些限制...

role=assistant
--------------------
<角色xx>
开场白...
介绍背景/人物/情节... 让用户知道怎么开始玩...
</角色xx>

<更新游戏状态>
- 主角:
    - 年龄: 18
    - 身份: 学生
    - 背景: A的好朋友
- 角色A:
    - 年龄: 19
    - 身份: 学生
    - 背景: B的好朋友
- 角色B:
    - 年龄: 28
    - 身份: 老师
    - 背景: 主角的班主任
</更新游戏状态>

role=user
--------------------
A, 做我女朋友吧!

role=assistant
--------------------
<角色A>
啊...好的!
</角色A>
<更新游戏状态>
主角.背景: A的男朋友
角色A.背景: 主角的女朋友
</更新游戏状态>

以上面的例子为例, 状态管理全部放在上下文中, 并且只更新所需要的那部分.
哪个角色输出由xml标签控制.